<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <title>Digo Dashobard Test</title>

    <script src="//g.alicdn.com/??hi/modulex/5.0.0/modulex.js,crm/flipper/0.4.0/flipper-bundle.js"></script>
    <script src="//g.alicdn.com/crm/flipper/0.4.1/vendor/jquery/jquery.js"></script>

    <link rel="import" href="//g.alicdn.com/crm/digo/0.0.28/vendor/bootstrap.html">
    <link rel="import" href="//g.alicdn.com/crm/digo/0.0.28/components/dashboard/index.html">
</head>

<body>
    <button id="update">Click to update Dashboard with QueryString</button>

    <digo-dashboard id="dashboard" code="d_rpt_dev_center"></digo-dashboard>


    <script>
        function unparam(value) {
            if (!value) { return {}; }
            var params = {}, pieces = value.split('&'), pair, i, l;
            for (i = 0, l = pieces.length; i < l; i++) {
                pair = pieces[i].split('=', 2);
                params[decodeURIComponent(pair[0])] = (pair.length == 2 ? decodeURIComponent(pair[1].replace(/\+/g, ' ')) : true);
            }
            return params;
        }

        function getFiltersFromUrl() {
            return unparam(location.search.substr(1));
        }

        document.getElementById('update').addEventListener('click', function() {
            var dashboard = document.getElementById('dashboard'),
                filterValue = getFiltersFromUrl();

            dashboard.update(filterValue);
        });
    </script>

</body>

</html>
