<script src="http://g.alicdn.daily.taobao.net/crm/flipper/0.3.4/vendor/jquery/jquery.js"></script>
<web-component name="crm-hello" template-engine="xtpl">
    <style>
        crm-hello {
            display: block;
        }

        crm-hello h1 {
            color: red;
        }
    </style>

    <template>
        <section>
            <h1>Hello {{name}}</h1>
            <small>called by key: "{{attr("key") }}"" </small>
            <hr>
            <button>Say Hi</button>
        </section>
    </template>

    <script>
        Flipper.register({
            initialize: function() {
                this.key = this.getAttribute('key');
            },
            fetch: function() {
                var key = this.key;
                return $.getJSON('./data/title.json').then(function(data) {
                    return {
                        name: data[key] || 'n/a'
                    };
                });
            },
            ready: function() {
                var model = this.model;
                $(this).find('button').on('click', function() {
                    window.alert('hi! ' + model.name);
                });
            },
            getName: function() {
                return this.model.name;
            },
            punch: function(targetName) {
                window.alert(this.getName() + ' punch ' + targetName);
            }
        });
    </script>
</web-component>
